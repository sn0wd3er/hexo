---
title: SQLmap
date: 2020-11-16 15:49:18
tags:
- SQLmap
category:
- Tools
---

## SQLmap

SQL Injection 자동화 도구

### Usage

`sqlmap -u [URL] --cookie=[Your Cookie]`

`sqlmap -u [URL] --cookie=[Your Cookie] --data [Data]` : POST 데이터 설정

`sqlmap -u [URL] --cookie=[Your Cookie] --data [Data] --dbs` : 데이터 베이스 이름 찾기 

`sqlmap -u [URL] --cookie=[Your Cookie] --data [Data] -D [Database Name] --tables` : 데이블 정보


`sqlmap -u [URL] --cookie=[Your Cookie] --data [Data] -D [Database Name] -T [Table Name] --columns` : 컬럼 조회

`sqlmap -u [URL] --cookie=[Your Cookie] --data [Data] -D [Database Name] -T [Table Name] -C [Column Name] --dump` : 해당 테이블의 컬럼 정보를 덤프 

`sqlmap -u [URL] --role` : role은 권한을 탐색해주는 옵션이다. 참고로 MsSql은 SA(administrator)가 관리자 권한이다.

### -r 옵션

BurpSuite로 패킷을 잡은 다음 패킷 내용을 복사한 후 텍스트 파일로 저장한 후 취약한 파라미터에 `''`싱글 쿼터를 준 후 `# sqlmap -r [text]`로 옵션을 주고 실행 하면 자동으로 쉽게 Injection을 할 수 있다.


### 주의사항

한 번 SQLmap을 사용하면 로그가 남아 동일한 대상으로 다시 SQLmap을 실행하려면 로그를 삭제하여야 한다. (log : `/.sqlmap/output/`)
TimeBased 기반 Injection은 과부하를 발생 시킬 수도 있어서 `--techniques`옵션을 줘서 Injection 종류를 정하는게 좋다

|technique|설명|
|:---:|:---|
|B| Boolean Based Blind SQL|
|E| Error Based SQL|
|U| Union Query|
|S| Stacked queries|
|T| Time-Based Blind|
